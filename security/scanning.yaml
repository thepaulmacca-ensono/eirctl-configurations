# Scanning Tasks

tasks:
  scan:terraform:checkov:
    context: powershell
    description: Perform Terraform Static Code Analysis using Checkov
    command:
      - |
        Write-Host ("Path: {0}" -f $env:TF_FILE_LOCATION)

        if ([string]::IsNullOrEmpty($env:checkov_version)) {
          pip3 -q install -U checkov
        } elseif ($(checkov -v) -ne $env:checkov_version) {
          pip3 -q install -U checkov==$env:checkov_version
        }

        checkov -d $env:TF_FILE_LOCATION -o cli -o junitxml --output-file-path console,terraform_results.xml
